var WB=window.WB||{};WB.DIPSettings={init:function(a){var t=WB.DIPSettings;t.switchAction(a),t.analytics(a),t.checkVersion()},checkVersion:function(){jQuery.post(ajaxurl,{action:"wb_dlipp",do:"chk_ver"},function(a){(a=(a=jQuery.trim(a)).replace(/\s+/,""))&&(jQuery("#version_tips").show(),jQuery("#version_tips .ver").html(a))})},switchAction:function(n,a){(a||n(".wb-switch[data-target]")).on("change",function(){var a=n(this),t=n(a.data("target"));a.prop("checked")?(a.attr("data-value","true"),t.addClass("active")):(a.attr("data-value","false"),t.removeClass("active"))})},analytics:function(e){var o=e("[data-wba-source]").length&&e("[data-wba-source]").data("wba-source")||window.wbaSource||document.domain;e("a[data-wba-campaign]").each(function(){var a=e(this),t=a.data("wba-campaign"),n=a.data("wba-media")||"link",i=a.attr("href");i+=i.match("[?]")?"&":"?",i+="utm_source="+o,i+="&utm_media="+n,i+="&utm_campaign="+t,a.attr("href",i)})}},jQuery(document).ready(function(a){WB.DIPSettings.init(a),a("#optionsframework-wrap").find("input,textarea").on("change",function(){a(window).on("beforeunload",function(){return confirm("您修改的设置尚未保存，确定离开此页面吗？")}),a("#optionsframework-submit").addClass("sticky-bottom")}),a("#optionsframework-submit .wbs-btn-primary").on("click",function(){a(window).unbind("beforeunload")})});